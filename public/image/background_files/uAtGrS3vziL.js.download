if (self.CavalryLogger) { CavalryLogger.start_js(["fHANF"]); }

__d("Keyframes",["Promise","Bootloader","NavigationMetrics","XHRRequest","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="tti";b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){a=b.event;g=a});function h(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["KeyframesRenderer"],function(b){return a(b)},"Keyframes")})}function i(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["FBKeyframesLoggedSession"],function(b){return a(b)},"Keyframes")})}function j(){return new(b("Promise"))(function(a){b("Bootloader").loadModules(["KeyframesAssetDecoder"],function(b){return a(b)},"Keyframes")})}function k(){return b("Promise").all([i(),j(),h()]).then(b("emptyFunction"))}function l(a){return!a||typeof a!=="string"?b("Promise").reject("Request: invalid uri "+a):new(b("Promise"))(function(c,d){new(b("XHRRequest"))(a).setMethod("GET").setResponseType("arraybuffer").setErrorHandler(function(a){return d(a)}).setAbortHandler(function(a){return d(a)}).setResponseHandler(function(a){return c(a)}).send()})}var m=function(){__p&&__p();function a(c){var d=this;this.$3=function(){var c=a.timestamp();b("promiseDone")(d.$1,function(a){return a.error(c)})};this.$1=i().then(function(a){return new a(c)});this.$2=this.$1.then(function(a){return a.getPerformanceLogIfEnabled()})}a.timestamp=function(){return{value:Date.now(),phase:g}};var c=a.prototype;c.scheduleDecode=function(c,d){__p&&__p();var e=c.then(function(){return a.timestamp()}),f=c.then(function(){return d}).then(function(){return a.timestamp()}),g=d.then(function(a){return a&&a.pluginsLoader&&a.pluginsLoader.getPluginTable instanceof Function?a.pluginsLoader.getPluginTable():[]});c=b("Promise").all([this.$1,e]).then(function(a){var c=a[0];a=a[1];c=c.startDecode(a);return b("Promise").all([c,f,g])});b("promiseDone")(c,function(a){var b=a[0],c=a[1];a=a[2];return b(c,a)},this.$3)};c.maybeGetPerformanceLog=function(){return this.$2};return a}(),n=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$1=!1;a=b("Promise").all([typeof a==="string"?l(a):a,j()]);this.$2=a.then(function(a){var b=a[0];a=a[1];return a.fromDocumentBytes(b)});c.scheduleDecode(a,this.$2);b("promiseDone")(this.$2,function(){return d.$1=!0},function(){return d.$1=!0})}var c=a.prototype;c.isDone=function(){return this.$1};c.getAsset=function(){return this.$2};c.getRenderer=function(c){var a=h();return b("Promise").all([this.$2,a,c.maybeGetPerformanceLog()]).then(function(a){var b=a[0],c=a[1];a=a[2];return new c(b,a)})};return a}(),o={};a={requestRenderer:function(a,b){b=new m(b);o[a]||(o[a]=new n(a,b));return o[a].getRenderer(b)},preload:function(a,c){if(!o[a]){c=new m(c);o[a]=new n(a,c)}c=k();a=o[a].getAsset();return b("Promise").all([c,a]).then(b("emptyFunction"))},requestRendererFromBytes:function(a,b){b=new m(b);return new n(a,b).getRenderer(b)},hasLoaded:function(a){return!!(o[a]&&o[a].isDone())},clearCache:function(){o={}}};e.exports=a}),null);