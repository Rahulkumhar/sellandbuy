if (self.CavalryLogger) { CavalryLogger.start_js(["xg28m"]); }

__d("OzDashPrefetchCache",["VideoDashPrefetchCache"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var c=a.prototype;c.hasCacheValue=function(a){return b("VideoDashPrefetchCache").hasCacheValue(a)};c.getCacheValue=function(a){return b("VideoDashPrefetchCache").getCacheValue(a)};c.getCachedRepresentations=function(a){return null};return a}();e.exports=a}),null);
__d("OzMosThresholdRestriction",["MosUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$4=new Map(),this.$1=a,this.$2=b,this.$3=c}var c=a.prototype;c.$5=function(a,c){var d=null;if(this.$4.get(a))d=this.$4.get(a);else{var e=a.getCustomField("playbackResolutionMos");e!=null&&(d=b("MosUtils").parsePlaybackMos(String(e)),d&&this.$4.set(a,d))}return d!=null?b("MosUtils").getMosValue(d,b("MosUtils").getQualityLabel(c.width,c.height)):null};c.$6=function(a,b){var c=this,d=a.some(function(a){a=c.$5(a,b);return a!=null?a>c.$2&&a<c.$1:!1});return!d?a:a.filter(function(a){a=c.$5(a,b);return a!=null?a<=c.$1:!0})};c.$7=function(a,b){var c=this,d=null;a.forEach(function(a){a=c.$5(a,b);a!=null&&a>c.$1&&(d==null||d>a)&&(d=a)});return d==null?a:a.filter(function(a){a=c.$5(a,b);return a==null?!0:a<=c.$1||a===d})};c.applyRestriction=function(a,b){return a.length===0?[]:this.$3?this.$7(a,b):this.$6(a,b)};return a}();e.exports=a}),null);
__d("RepomenAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzAbrUtils").excludeLargeRepresentations,h=b("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation,i=b("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates,j=b("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions;a=function(){__p&&__p();function a(a,b,c,d,e,f,g){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$12=null,this.$1=a,this.$5=b,this.$6=c,this.$7=d,this.$8=e,this.$10=f,this.$13=g}var c=a.prototype;c.setSourceBuffer=function(a){this.$9=a};c.getBestRepresentation=function(){__p&&__p();var a=i(this.$9,this.$8),c=h(this.$1,this.$4,a,b("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(c!==null&&c!==void 0){this.$12=c;return this.$5}c=Date.now();this.$2=c;var d=this.$10.getDimensions(),e=g(this.$1,this.$6,d,this.$13);e=j(this.$7,d,e);d=b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1);var f,k=this.$1.getNumber("bandwidth_abr_ratio",1),l=this.$1.getNumber("bandwidth_abr_bias",0),m=this.$1.getNumber("buffer_abr_ratio",1),n=this.$1.getNumber("buffer_abr_bias",0);k=k*(d/1e6-l)+m*(a-n);for(var d=0;d<e.length;d++)e[d].getBandwidth()/1e6<k&&(f=e[d]);f=f||e[0];this.$5!==f&&(this.$4=!0,this.$3=c,this.$5=f);this.$12="repomen";return f};c.getStreamSegmentsCountStrategy=function(){return null};c.getLastEvaluationReason=function(){return this.$12};return a}();e.exports=a}),null);
__d("OzActiveActiveFailoverNetworkRequestStreamHandler",["oz-player/networks/createNetworkError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.onResponse=function(a,c){var d=a.headers;a=a.status;if(d&&d.has("x-fb-video-replica")){a=b("oz-player/networks/createNetworkError")(new Error("Replica switch requested via HTTP headers"),a,d,c,"HTTP error.");throw a}return null};c.onError=function(a,b){return null};return a}();e.exports=a}),null);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){var c=this;if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=c.$1});return b.length>0?b:[a[a.length-1]]};return a}();e.exports=a}),null);
__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry;a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.onResponse=function(a,c){var d=this,e=a.headers;if(!this.$1)return null;a=new(b("oz-player/networks/OzTransformStream"))();a.addListener("writableClose",function(){var a={},b=g(c);b&&(a.lat=Math.round(b.responseStart-b.requestStart).toString());d.$1&&e&&d.$1(e,a)});return a};c.onError=function(a,b){return null};return a}();e.exports=a}),null);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a={getBool:function(a,c){return b("VideoPlayerShakaGlobalConfig").getBool(g+a,c)},getNumber:function(a,c){return b("VideoPlayerShakaGlobalConfig").getNumber(g+a,c)},getString:function(a,c){return b("VideoPlayerShakaGlobalConfig").getString(g+a,c)}};e.exports=a}),null);
__d("oz-player/manifests/PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d,e,f,g,h,i){__p&&__p();i===void 0&&(i=!1);c=a.call(this,b,c,d,e,i)||this;c.$PredictedSegmentTemplateSegmentsContainer5=d;c.$PredictedSegmentTemplateSegmentsContainer2=f;c.$PredictedSegmentTemplateSegmentsContainer3=g;c.$PredictedSegmentTemplateSegmentsContainer1=e[e.length-1].d;i=e[e.length-1].t+c.$PredictedSegmentTemplateSegmentsContainer1;d=i+h*c.$PredictedSegmentTemplateSegmentsContainer1;c.$PredictedSegmentTemplateSegmentsContainer4={startTime:i/c.$PredictedSegmentTemplateSegmentsContainer5,endTime:d/c.$PredictedSegmentTemplateSegmentsContainer5};c.$PredictedSegmentTemplateSegmentsContainer6=b.getNumber("live_numerical_error_epsilon",0);return c}var d=c.prototype;d.$PredictedSegmentTemplateSegmentsContainer7=function(a,c,d){return{getURI:function(){return new(b("oz-player/shims/OzURI"))(d)},getTimeRange:function(){return{startTime:a,endTime:c}},getByteRange:function(){return null}}};d.updateWith=function(d){d instanceof c||b("oz-player/shims/ozvariant")(0,646);if(this.$PredictedSegmentTemplateSegmentsContainer4==null)return;this.$PredictedSegmentTemplateSegmentsContainer4=d.$PredictedSegmentTemplateSegmentsContainer4;this.$PredictedSegmentTemplateSegmentsContainer3=d.$PredictedSegmentTemplateSegmentsContainer3;a.prototype.updateWith.call(this,d)};d.getSegmentByTime=function(b){if(b>=this.$PredictedSegmentTemplateSegmentsContainer4.startTime&&b<this.$PredictedSegmentTemplateSegmentsContainer4.endTime){var c=Math.floor(((b-this.$PredictedSegmentTemplateSegmentsContainer4.startTime)*this.$PredictedSegmentTemplateSegmentsContainer5+this.$PredictedSegmentTemplateSegmentsContainer6)/this.$PredictedSegmentTemplateSegmentsContainer1),d=this.$PredictedSegmentTemplateSegmentsContainer3+c+1;d=this.$PredictedSegmentTemplateSegmentsContainer2.replace("$Number$",d.toString());c=this.$PredictedSegmentTemplateSegmentsContainer4.startTime+c*this.$PredictedSegmentTemplateSegmentsContainer1/this.$PredictedSegmentTemplateSegmentsContainer5;return this.$PredictedSegmentTemplateSegmentsContainer7(c,c+this.$PredictedSegmentTemplateSegmentsContainer1/this.$PredictedSegmentTemplateSegmentsContainer5,d)}return a.prototype.getSegmentByTime.call(this,b)};d.getTimeRanges=function(){__p&&__p();if(this.$PredictedSegmentTemplateSegmentsContainer4==null)return a.prototype.getTimeRanges.call(this);var c=a.prototype.getTimeRanges.call(this).slice(0);c.push(this.$PredictedSegmentTemplateSegmentsContainer4);c=new(b("oz-player/utils/OzNumericalRangeUtil"))().mergeSortedRanges(c.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));return c.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a==null?Infinity:a;return{startTime:b,endTime:a}})};return c}(b("oz-player/manifests/SegmentTemplateSegmentsContainer"));e.exports=a}),null);
__d("oz-player/parsers/OzPredictedSegmentTimelineParser",["URI","oz-player/manifests/PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper","oz-player/parsers/OzDefaultSegmentTimelineParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.parseSegmentsContainer=function(a,c,d,e){__p&&__p();var f=a.getNumber("num_predictive_segments",0),g;if(e.SegmentTimeline[0].$.FBPredictedMedia){g=b("oz-player/utils/OzUrlHelper").normalize(c,e.SegmentTimeline[0].$.FBPredictedMedia);var h=new(b("URI"))(g);h=h.addQueryData("_nc_sc",1);g=h.toString()}var i;e.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(i=Number.parseInt(e.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0));h=b("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(a,e);return g!=null&&i!=null?new(b("oz-player/manifests/PredictedSegmentTemplateSegmentsContainer"))(a,b("oz-player/utils/OzUrlHelper").normalize(c,e.$.media),Number.parseInt(e.$.timescale,10),h,g,i,f,d):new(b("oz-player/manifests/SegmentTemplateSegmentsContainer"))(a,b("oz-player/utils/OzUrlHelper").normalize(c,e.$.media),Number.parseInt(e.$.timescale,10),h,d)};return a}();e.exports=a}),null);
__d("reportOzError",["oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a instanceof b("oz-player/utils/OzError")){var c=a.getExtra();return{error:a.getType(),message:a.getDescription(),httpStatus:c.code,url:c.url,stack:a.stack}}else return{error:"OZ_JAVASCRIPT_NATIVE",message:a.name+" "+a.message,httpStatus:null,url:null,stack:a.stack}}e.exports=a}),null);
__d("VideoPlayerHTML5Oz",["invariant","Promise","BanzaiODS","Deferred","EventEmitter","EventListener","FBLogger","MaybeNativePromise","OzActiveActiveFailoverNetworkRequestStreamHandler","OzDashPrefetchCache","OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","OzVideoLiveTraceNetworkRequestStreamHandler","RepomenAbrManager","SubscriptionsHandler","TimeRanges","URI","VideoPlayerConnectionQuality","VideoPlayerOzWWWConfig","VideoPlayerOzWWWGlobalConfig","VideoPlayerPlayLogger","VideoPlayerShakaPerformanceLogger","VideoPlayerVersions","VideoQualityClass","XHRRequest","extractCEA608","getCrossOriginTransport","gkx","manifestHasUnsupportedCodecs","oz-player","oz-player/configs/OzGlobalConfig","oz-player/loggings/OzLoggingUtils","oz-player/networks/OzBandwidthEstimator","oz-player/parsers/OzPredictedSegmentTimelineParser","oz-player/shims/OzReadableStream","oz-player/shims/OzURI","oz-player/shims/OzWritableStream","oz-player/strategies/OzBufferingDetector","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils","parseHeaders","reportOzError","setTimeout","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,i=b("oz-player/utils/OzNetworkRequestLoggingUtils").setPerformanceLoggingAttributes;b("oz-player/configs/OzGlobalConfig").setGlobalConfig(b("VideoPlayerOzWWWGlobalConfig"));var j=720,k=/(livestream-)?lookaside\.(facebook|workplace)\.com$/,l=function(a){return k.test(a.getDomain())};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.isSupported=function(a){var c;!a.hasDashManifest()&&!a.getLiveManifestUrl()?c="noDashManifest":!window.MediaSource?c="noMediaSourceSupport":!window.fetch?c="noFetch":!b("oz-player/shims/OzReadableStream")||!b("oz-player/shims/OzReadableStream").prototype.pipeTo||!b("oz-player/shims/OzReadableStream").prototype.pipeThrough?c="noReadableStream":!b("oz-player/shims/OzWritableStream")?c="noWritableStream":b("manifestHasUnsupportedCodecs")(a.getDashManifest())&&(c="codecNotSupported");if(c){b("BanzaiODS").bumpEntityKey("VideoPlayerHtml5Oz","fallback."+c);return!1}return!0};c.getEstimatedBandwidth=function(){return b("oz-player/networks/OzBandwidthEstimator").getBandwidth(b("VideoPlayerOzWWWGlobalConfig"))};function c(c,d,e){__p&&__p();var f,g=e.config,h=e.manifest,i=e.manifestUrl,j=e.videoID,k=e.isLive,l=e.isServableViaFbms,m=e.accessToken,n=e.playerOrigin,o=e.playerSuborigin,p=e.playerInstanceKey,q=e.prefetchCache,r=e.width,s=e.height,t=e.minPlayQuality,u=e.startTimestamp,v=e.seekHandler,w=e.videoLiveTrace,x=e.disableAbr,y=e.OzDrmHelper,z=e.videoLicenseUriMap,A=e.graphApiVideoLicenseUri;e=e.widevineCert;f=a.call(this)||this;f.$VideoPlayerHTML5Oz5=1;f.$VideoPlayerHTML5Oz6=!1;f.$VideoPlayerHTML5Oz8=null;f.$VideoPlayerHTML5Oz22=!1;f.$VideoPlayerHTML5Oz23=!1;f.$VideoPlayerHTML5Oz24=null;f.$VideoPlayerHTML5Oz25=null;f.$VideoPlayerHTML5Oz26=0;f.$VideoPlayerHTML5Oz27=null;f.$VideoPlayerHTML5Oz28=!1;f.$VideoPlayerHTML5Oz31=!0;f.$VideoPlayerHTML5Oz32=!1;f.$VideoPlayerHTML5Oz33=!1;f.$VideoPlayerHTML5Oz1=c;f.$VideoPlayerHTML5Oz2=h;f.$VideoPlayerHTML5Oz3=new(b("VideoPlayerOzWWWConfig"))(g);f.$VideoPlayerHTML5Oz16=d;f.$VideoPlayerHTML5Oz14=i;f.$VideoPlayerHTML5Oz15=q;f.$VideoPlayerHTML5Oz17=j;f.$VideoPlayerHTML5Oz18=r;f.$VideoPlayerHTML5Oz19=s;f.$VideoPlayerHTML5Oz20=u;f.$VideoPlayerHTML5Oz29=v;f.$VideoPlayerHTML5Oz30=w;f.$VideoPlayerHTML5Oz33=!!x;f.$VideoPlayerHTML5Oz34=y;f.$VideoPlayerHTML5Oz35=m;f.$VideoPlayerHTML5Oz36=z;f.$VideoPlayerHTML5Oz37=A;f.$VideoPlayerHTML5Oz38=e;f.$VideoPlayerHTML5Oz9=b("VideoPlayerShakaPerformanceLogger").shouldInitialize()?new(b("VideoPlayerShakaPerformanceLogger"))({videoID:j,video:c,representationId:null,isLive:k,isServableViaFbms:l,accessToken:m,playerOrigin:n,playerSuborigin:o,playerVersion:f.getPlayerVersion(),uniqueID:p,getBandwidthEstimate:function(a){return b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(f.$VideoPlayerHTML5Oz3)},isDrm:f.isDrm()}):null;f.$VideoPlayerHTML5Oz9&&(f.$VideoPlayerHTML5Oz21=new(b("VideoPlayerPlayLogger"))(f.$VideoPlayerHTML5Oz1,f.$VideoPlayerHTML5Oz9));f.$VideoPlayerHTML5Oz13=t;(!f.$VideoPlayerHTML5Oz15||typeof f.$VideoPlayerHTML5Oz15.getCachedRepresentations!=="function")&&(f.$VideoPlayerHTML5Oz15=null);!f.$VideoPlayerHTML5Oz15&&f.$VideoPlayerHTML5Oz3.getBool("use_prefetch_cache",!1)&&(f.$VideoPlayerHTML5Oz15=new(b("OzDashPrefetchCache"))());f.$VideoPlayerHTML5Oz39();return f}var d=c.prototype;d.$VideoPlayerHTML5Oz39=function(){__p&&__p();var a=this;this.$VideoPlayerHTML5Oz12=new(b("SubscriptionsHandler"))();this.$VideoPlayerHTML5Oz40();var c=this.$VideoPlayerHTML5Oz3.getBool("fix_live_video_duration_buffering",!1);this.$VideoPlayerHTML5Oz7=new(b("oz-player/strategies/OzBufferingDetector"))(this.$VideoPlayerHTML5Oz1,this.$VideoPlayerHTML5Oz3,function(){return!c||a.$VideoPlayerHTML5Oz28?a.$VideoPlayerHTML5Oz1.duration:Infinity});this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)||(this.$VideoPlayerHTML5Oz7.addListener("enter_buffering",this.$VideoPlayerHTML5Oz41.bind(this)),this.$VideoPlayerHTML5Oz7.addListener("leave_buffering",this.$VideoPlayerHTML5Oz42.bind(this)));this.$VideoPlayerHTML5Oz12.addSubscriptions(b("EventListener").listen(this.$VideoPlayerHTML5Oz1,"timeupdate",function(b){a.$VideoPlayerHTML5Oz43(b.target.currentTime)}));this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)&&this.$VideoPlayerHTML5Oz12.addSubscriptions(this.$VideoPlayerHTML5Oz7.addListener("enter_buffering",this.$VideoPlayerHTML5Oz41.bind(this)),this.$VideoPlayerHTML5Oz7.addListener("leave_buffering",this.$VideoPlayerHTML5Oz42.bind(this)))};d.setup=function(){var a=[];this.$VideoPlayerHTML5Oz9&&a.push(this.$VideoPlayerHTML5Oz9);var b=[];this.$VideoPlayerHTML5Oz3.getBool("force_initial_representation",!1)&&(b=this.$VideoPlayerHTML5Oz16);this.$VideoPlayerHTML5Oz2?this.$VideoPlayerHTML5Oz44({manifest:this.$VideoPlayerHTML5Oz2,manifestUrl:this.$VideoPlayerHTML5Oz14,loggerProviders:a,prefetchCache:this.$VideoPlayerHTML5Oz15,initialRepresentations:b,videoID:this.$VideoPlayerHTML5Oz17,width:this.$VideoPlayerHTML5Oz18,height:this.$VideoPlayerHTML5Oz19}):(!this.$VideoPlayerHTML5Oz14&&g(0,1106),this.$VideoPlayerHTML5Oz45(this.$VideoPlayerHTML5Oz14,a,b))};d.$VideoPlayerHTML5Oz45=function(a,c,d){__p&&__p();var e=this;this.$VideoPlayerHTML5Oz46(a).then(function(b){e.$VideoPlayerHTML5Oz44({manifest:b,manifestUrl:a,loggerProviders:c,prefetchCache:e.$VideoPlayerHTML5Oz15,initialRepresentations:d,videoID:e.$VideoPlayerHTML5Oz17,width:e.$VideoPlayerHTML5Oz18,height:e.$VideoPlayerHTML5Oz19})})["catch"](function(f){if(f instanceof b("oz-player/utils/OzError")&&e.$VideoPlayerHTML5Oz26<e.$VideoPlayerHTML5Oz3.getNumber("initial_manifest_request_retry_count",0)){var g=JSON.parse(e.$VideoPlayerHTML5Oz3.getString("network_retry_intervals_json","{}"));g=g[f.getExtra().code];typeof g==="number"&&g>0?(e.$VideoPlayerHTML5Oz26++,b("setTimeout")(function(){e.$VideoPlayerHTML5Oz45(a,c,d)},g)):e.$VideoPlayerHTML5Oz47(f)}else e.$VideoPlayerHTML5Oz47(f)})};d.$VideoPlayerHTML5Oz46=function(a){__p&&__p();var c=this,d=new(b("Deferred"))();this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz27=this.$VideoPlayerHTML5Oz9.getOperationLogger("request").setType("manifest").setResource(a).start());var e=new(b("URI"))(a),f=this.$VideoPlayerHTML5Oz3.getBool("use_oz_credentials_provider",!1)&&l(e);new(b("XHRRequest"))(e).setMethod("GET").setResponseType("text").setTransportBuilder(f?b("getCrossOriginTransport").withCredentials:b("getCrossOriginTransport")).setErrorHandler(function(e){__p&&__p();if(c.$VideoPlayerHTML5Oz3.getBool("enable_double_ingest",!1)&&e&&e.errorRawResponseHeaders){var f=b("parseHeaders")(e.errorRawResponseHeaders);f=f["x-fb-video-replica"];if(f!=null){c.emit("replicaSwitch",{replica:parseInt(f,10),url:a,status:e.rawTransportStatus,timestamp:new Date().valueOf()});return}}d.reject(e?new(b("oz-player/utils/OzError"))({type:e.errorCode,description:e.errorMsg,extra:{code:e.errorRawTransportStatus,url:a}}):e);c.$VideoPlayerHTML5Oz27&&(c.$VideoPlayerHTML5Oz27.setError(e).log(),c.$VideoPlayerHTML5Oz27=null)}).setResponseHandler(Object.assign(function(b){c.$VideoPlayerHTML5Oz27&&(i(c.$VideoPlayerHTML5Oz27,a),c.$VideoPlayerHTML5Oz27&&c.$VideoPlayerHTML5Oz27.log(),c.$VideoPlayerHTML5Oz27=null),d.resolve(b)},{includeHeaders:!0})).send();return d.getPromise()};d.$VideoPlayerHTML5Oz44=function(a){__p&&__p();var c=this,d=a.manifest,e=a.manifestUrl,f=a.loggerProviders,g=a.prefetchCache,h=a.initialRepresentations,i=a.videoID,j=a.width;a=a.height;var k=this.$VideoPlayerHTML5Oz48();d=this.$VideoPlayerHTML5Oz4=new(b("oz-player"))({videoNodeOrQuickStarter:this.$VideoPlayerHTML5Oz1,config:this.$VideoPlayerHTML5Oz3,rawMpdXml:d,dimensions:{width:j,height:a},mpdUrl:e,customSegmentTimelineParser:this.$VideoPlayerHTML5Oz3.getBool("enable_predictive_dash",!1)?new(b("oz-player/parsers/OzPredictedSegmentTimelineParser"))():void 0,loggerConfig:{perfLoggerProviders:f,observedOperationLoggers:[],isOzDevConsoleEnabled:b("gkx")("722076")},prefetchCache:g,networkRequestStreamHandlers:[new(b("OzActiveActiveFailoverNetworkRequestStreamHandler"))(),new(b("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(a,b){c.$VideoPlayerHTML5Oz30&&c.$VideoPlayerHTML5Oz30.handleHeaders(a,b)})],getShouldIncludeCredentials:this.$VideoPlayerHTML5Oz3.getBool("use_oz_credentials_provider",!1)?l:null,initialRepresentationIDs:h||[],customParsers:this.$VideoPlayerHTML5Oz49(),entityKey:i,videoPlaybackRestrictions:this.$VideoPlayerHTML5Oz50(),customRepresentationParsers:this.$VideoPlayerHTML5Oz51(),videoAbrManagerFactory:this.$VideoPlayerHTML5Oz52(),seekHandler:this.$VideoPlayerHTML5Oz29,streamGoneHandler:this.$VideoPlayerHTML5Oz53(),initialPlaybackPositionForDynamicMpd:this.$VideoPlayerHTML5Oz3.getNumber("live_initial_playback_position",0),startTimeStamp:this.$VideoPlayerHTML5Oz3.getBool("fix_start_timestamp",!1)?this.$VideoPlayerHTML5Oz20||0:0,drmManagerModule:this.$VideoPlayerHTML5Oz34?this.$VideoPlayerHTML5Oz34.OzDrmManagerModule:null,drmProviders:k});!this.$VideoPlayerHTML5Oz3.getBool("cleanup_all_ozplayer_subscriptions",!1)?(d.onError(this.$VideoPlayerHTML5Oz47.bind(this)),d.addListener("destroyed",this.$VideoPlayerHTML5Oz54.bind(this)),d.addListener("debug/dashPlayerEvent",this.$VideoPlayerHTML5Oz55.bind(this)),d.addListener("streamEnd",this.$VideoPlayerHTML5Oz56.bind(this))):this.$VideoPlayerHTML5Oz12.addSubscriptions(d.onError(this.$VideoPlayerHTML5Oz47.bind(this)),d.addListener("destroyed",this.$VideoPlayerHTML5Oz54.bind(this)),d.addListener("debug/dashPlayerEvent",this.$VideoPlayerHTML5Oz55.bind(this)),d.addListener("streamEnd",this.$VideoPlayerHTML5Oz56.bind(this)));d.setupPlayer();this.$VideoPlayerHTML5Oz57(d);this.$VideoPlayerHTML5Oz3.getBool("emit_cea_608_availability",!1)&&this.$VideoPlayerHTML5Oz58(d);this.$VideoPlayerHTML5Oz30&&this.$VideoPlayerHTML5Oz59(d);this.$VideoPlayerHTML5Oz60()&&d.updatePlayerRunTimeConfig({videoStreamDataHandler:this.$VideoPlayerHTML5Oz61()});this.$VideoPlayerHTML5Oz3.getBool("update_seekable_range",!1)&&this.$VideoPlayerHTML5Oz62(d)};d.$VideoPlayerHTML5Oz62=function(a){var b=this;a=a.getMpd();this.$VideoPlayerHTML5Oz12.addSubscriptions(a.addListener("updated",function(){b.emit("seekRangeChanged")}))};d.$VideoPlayerHTML5Oz48=function(){var a=[];this.$VideoPlayerHTML5Oz34&&a.push(new this.$VideoPlayerHTML5Oz34.OzWidevineDrmProviderModule(this.$VideoPlayerHTML5Oz17,this.$VideoPlayerHTML5Oz37,this.$VideoPlayerHTML5Oz36,this.$VideoPlayerHTML5Oz35,this.$VideoPlayerHTML5Oz38));return a};d.$VideoPlayerHTML5Oz61=function(){__p&&__p();var a=this;return this.$VideoPlayerHTML5Oz3.getBool("parse_cea_608",!1)?function(c,d){__p&&__p();if(!a.$VideoPlayerHTML5Oz60()||!a.$VideoPlayerHTML5Oz31)return;try{c=c.getCustomField("timescale")||0;if(!c||typeof c!=="number")return;d=b("extractCEA608")(d,c).then(function(b){a.emit("cea608CaptionsParsed",b)});a.$VideoPlayerHTML5Oz9&&h(d,a.$VideoPlayerHTML5Oz9,"cea608_extraction")}catch(b){a.$VideoPlayerHTML5Oz47(b)}}:null};d.$VideoPlayerHTML5Oz50=function(){var a=[];this.$VideoPlayerHTML5Oz13===b("VideoQualityClass").HD&&a.push(new(b("OzMinimumSmallestDimensionRestriction"))(j));var c=this.$VideoPlayerHTML5Oz3.getNumber("mos_upper_threshold",0),d=this.$VideoPlayerHTML5Oz3.getNumber("mos_lower_threshold",0);c>d&&a.push(new(b("OzMosThresholdRestriction"))(c,d,this.$VideoPlayerHTML5Oz3.getBool("keep_lowest_mos_above_upper_thresold",!1)));return a};d.$VideoPlayerHTML5Oz43=function(a){__p&&__p();if(this.$VideoPlayerHTML5Oz3.getBool("fix_representation_ended_timing",!1)&&(this.$VideoPlayerHTML5Oz1.paused||this.$VideoPlayerHTML5Oz1.seeking))return;if(!this.$VideoPlayerHTML5Oz4)return;a=this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$VideoPlayerHTML5Oz8){var b=this.$VideoPlayerHTML5Oz8;this.$VideoPlayerHTML5Oz8=a;b!=null&&this.emit("representation_ended",{representationID:b,nextRepresentationID:a})}};d.$VideoPlayerHTML5Oz40=function(){var a=this,d=this.$VideoPlayerHTML5Oz3.getNumber("connection_quality_context_throttle_frequency",0);if(d===0)return;var e=function(){a.$VideoPlayerHTML5Oz3.setContext("connection_quality",b("VideoPlayerConnectionQuality").evaluate(c.getEstimatedBandwidth))};this.$VideoPlayerHTML5Oz12.addSubscriptions(b("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",b("throttle")(e,d)));e()};d.$VideoPlayerHTML5Oz53=function(){return this.$VideoPlayerHTML5Oz3.getBool("end_all_streams_on_stream_gone",!1)?function(a){return a.forEach(function(a){return a.endStream()})}:null};d.$VideoPlayerHTML5Oz47=function(a){if(a instanceof b("oz-player/utils/OzError")){var c=a.getExtra();(c.code==="417"||c.code==="200")&&c.headers&&c.headers.has("x-fb-video-replica")&&this.$VideoPlayerHTML5Oz3.getBool("enable_double_ingest",!1)?this.emit("replicaSwitch",{replica:parseInt(c.headers.get("x-fb-video-replica"),10),url:c.url,status:c.code,timestamp:new Date().valueOf()}):(this.emit("error",b("reportOzError")(a)),this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.destroy())}else this.emit("error",b("reportOzError")(a))};d.$VideoPlayerHTML5Oz56=function(){this.$VideoPlayerHTML5Oz28=!0};d.$VideoPlayerHTML5Oz54=function(){this.$VideoPlayerHTML5Oz4=null};d.$VideoPlayerHTML5Oz55=function(a){this.emit("debug/dashPlayerEvent",a.detail)};d.$VideoPlayerHTML5Oz63=function(){var a=1;return this.$VideoPlayerHTML5Oz24!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz24)<a||this.$VideoPlayerHTML5Oz25!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz25)<a?!0:!1};d.$VideoPlayerHTML5Oz41=function(a){this.$VideoPlayerHTML5Oz63()||(this.$VideoPlayerHTML5Oz22=!0,this.emit("bufferingStart"),this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz10=this.$VideoPlayerHTML5Oz9.getOperationLogger("buffering").setType(a))),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz64()};d.$VideoPlayerHTML5Oz42=function(){(!this.$VideoPlayerHTML5Oz3.getBool("buffer_end_only_when_buffering",!1)||this.$VideoPlayerHTML5Oz22)&&(this.emit("bufferingEnd"),this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null),this.$VideoPlayerHTML5Oz22=!1),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz65()};d.$VideoPlayerHTML5Oz64=function(){this.$VideoPlayerHTML5Oz5==null&&(this.$VideoPlayerHTML5Oz5=this.$VideoPlayerHTML5Oz1.playbackRate),this.$VideoPlayerHTML5Oz1.playbackRate=0};d.$VideoPlayerHTML5Oz65=function(){this.$VideoPlayerHTML5Oz5&&(this.$VideoPlayerHTML5Oz1.playbackRate=this.$VideoPlayerHTML5Oz5),this.$VideoPlayerHTML5Oz5=null};d.$VideoPlayerHTML5Oz59=function(a){var b=this,c=a.getMpd();a=function(){if(b.$VideoPlayerHTML5Oz30){var a=c.getCustomField("loapStreamType");typeof a==="number"&&b.$VideoPlayerHTML5Oz30&&b.$VideoPlayerHTML5Oz30.setStreamType(a)}};a();this.$VideoPlayerHTML5Oz12.addSubscriptions(c.addListener("updated",a))};d.$VideoPlayerHTML5Oz58=function(a){var b=this,c=a.getMpd();a=this.$VideoPlayerHTML5Oz3.getBool("enable_asr_captions",!1);this.$VideoPlayerHTML5Oz32=!!c.getCustomField("hasInlinedSubtitlesFromUsingASRCaptions")&&a;a=function(){b.$VideoPlayerHTML5Oz66(!!c.getCustomField("hasInlinedSubtitles")||b.$VideoPlayerHTML5Oz32)};a();this.$VideoPlayerHTML5Oz12.addSubscriptions(c.addListener("updated",a))};d.$VideoPlayerHTML5Oz66=function(a){if(this.$VideoPlayerHTML5Oz6===a)return;this.$VideoPlayerHTML5Oz6=a;this.emit("cea608AvailabilityChanged")};d.$VideoPlayerHTML5Oz60=function(){return this.$VideoPlayerHTML5Oz6};d.$VideoPlayerHTML5Oz57=function(a){var b=this;a=a;if(!a)return;this.$VideoPlayerHTML5Oz3.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0)>0&&this.$VideoPlayerHTML5Oz12.addSubscriptions(a.addListener("streamInterruptAt",function(a){b.$VideoPlayerHTML5Oz24=a,b.$VideoPlayerHTML5Oz22&&(b.emit("bufferingEnd"),b.$VideoPlayerHTML5Oz10&&(b.$VideoPlayerHTML5Oz10.log(),b.$VideoPlayerHTML5Oz10=null)),b.$VideoPlayerHTML5Oz67()}),a.addListener("streamResumedAt",function(a){b.$VideoPlayerHTML5Oz25=a,b.$VideoPlayerHTML5Oz23&&b.$VideoPlayerHTML5Oz68()}))};d.$VideoPlayerHTML5Oz67=function(){this.emit("streamInterrupted"),this.$VideoPlayerHTML5Oz22=!1,this.$VideoPlayerHTML5Oz23=!0,this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz11=this.$VideoPlayerHTML5Oz9.getOperationLogger("stream_interrupted"))};d.$VideoPlayerHTML5Oz68=function(){this.emit("streamResumed"),this.$VideoPlayerHTML5Oz11&&(this.$VideoPlayerHTML5Oz11.log(),this.$VideoPlayerHTML5Oz11=null),this.$VideoPlayerHTML5Oz23=!1};d.$VideoPlayerHTML5Oz49=function(){__p&&__p();return new Map([["fbProjection",function(a){try{return a.Period[0].AdaptationSet[0].$.FBProjection||null}catch(a){return null}}],["hasInlinedSubtitles",function(a){a=a.Period[0];a=a&&a.AdaptationSet[0].Accessibility;return a&&a[0]?a[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInlinedSubtitlesFromUsingASRCaptions",function(a){a=Number.parseInt(a.$.usingASRCaptions,0);return!isNaN(a)&&a!=0}],["isFBIsLiveTemplated",function(a){return a.$.FBIsLiveTemplated==="true"}],["loapStreamType",function(a){return a.$.loapStreamType?parseInt(a.$.loapStreamType,10):0}]])};d.$VideoPlayerHTML5Oz51=function(){__p&&__p();var a=this,c={timescale:function(a){a=a.SegmentTemplate;if(a&&a.length>0){a=a[0].$;if(a)return Number.parseInt(a.timescale,0)||null}return null}},d=this.$VideoPlayerHTML5Oz3.getNumber("mos_upper_threshold",0),e=this.$VideoPlayerHTML5Oz3.getNumber("mos_lower_threshold",0);d>e&&(c.playbackResolutionMos=function(a){try{return a.$.FBPlaybackResolutionMos}catch(a){return null}});c.qualityLabel=function(a){try{return a.$.FBQualityLabel}catch(a){return null}};this.$VideoPlayerHTML5Oz3.getBool("parse_first_segment",!1)&&(c.firstSegmentParser=function(c){if(a.$VideoPlayerHTML5Oz20!=null&&a.$VideoPlayerHTML5Oz20>0)return null;try{var d=c.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),e={startByte:d[0],endByte:d[1]},f=new(b("oz-player/shims/OzURI"))(c.BaseURL[0]._);return{getURI:function(){return f},getByteRange:function(){return e},getTimeRange:function(){return{startTime:0,endTime:2}}}}catch(a){return null}});return c};d.$VideoPlayerHTML5Oz52=function(){return this.$VideoPlayerHTML5Oz3.getBool("use_repomen_abr",!1)?function(a,c,d,e,f,g,h){return new(b("RepomenAbrManager"))(a,c,d,e,f,g,h)}:null};d.play=function(){this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.playStarted();return this.$VideoPlayerHTML5Oz1.play()};d.pause=function(){this.$VideoPlayerHTML5Oz1.pause()};d.reload=function(){if(this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)){this.$VideoPlayerHTML5Oz39();this.setup();return b("MaybeNativePromise").resolve()}return b("Promise").reject()};d.unload=function(){this.$VideoPlayerHTML5Oz12.release();this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null);this.$VideoPlayerHTML5Oz11&&(this.$VideoPlayerHTML5Oz11.log(),this.$VideoPlayerHTML5Oz11=null);this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.unload();this.$VideoPlayerHTML5Oz26=0;var a=b("Promise").resolve();this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)&&this.$VideoPlayerHTML5Oz7&&this.$VideoPlayerHTML5Oz7.destroy();this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)&&(this.$VideoPlayerHTML5Oz42(),this.$VideoPlayerHTML5Oz4&&(a=this.$VideoPlayerHTML5Oz4.destroy(),this.$VideoPlayerHTML5Oz4=null));return a};d.getVideoStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a)};d.getAudioStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getAudioRepresentationIDAtTime(a)};d.getDashAudioConfiguration=function(){return""};d.getLocalEstimator=function(){return null};d.setDimensions=function(a,b){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.setDimensions({width:a,height:b})};d.getLongestInitResponseTime=function(){return 0};d.setPlaybackRate=function(a){this.$VideoPlayerHTML5Oz5=a,this.$VideoPlayerHTML5Oz1.playbackRate=a};d.hasSubtitles=function(){return this.$VideoPlayerHTML5Oz60()};d.areSubtitlesAutogenerated=function(){return this.$VideoPlayerHTML5Oz32};d.enableSubtitles=function(a){this.$VideoPlayerHTML5Oz31=a};d.setPreferredVideoQuality=function(a){if(!this.$VideoPlayerHTML5Oz4)return;this.$VideoPlayerHTML5Oz4.switchToVideoQuality(a)};d.setVideoStreamOffset=function(a){};d.getSelectedVideoQuality=function(){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getCurrentQuality()};d.unsetPreferredVideoQuality=function(){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.enableVideoQualityAdaptation()};d.getAvailableVideoQualities=function(){return!this.$VideoPlayerHTML5Oz4?[]:this.$VideoPlayerHTML5Oz4.getVideoQualities()};d.getIsAbrEnabled=function(){return this.$VideoPlayerHTML5Oz3.getBool("enable_adaptation",!1)&&!this.$VideoPlayerHTML5Oz33};d.canAutoSelectVideoQuality=function(){return!0};d.isDrm=function(){var a;this.$VideoPlayerHTML5Oz4&&(a=this.$VideoPlayerHTML5Oz4.isDrm());(a===void 0||a===null)&&this.$VideoPlayerHTML5Oz2&&(a=this.$VideoPlayerHTML5Oz2.indexOf("<ContentProtection")>=0);return a};d.setPreloadDisabled=function(a){};d.restoreStreamBufferSize=function(){};d.getDebug=function(){return{manifest:this.$VideoPlayerHTML5Oz2,DashPlayer:this.$VideoPlayerHTML5Oz4,AbrManager:this.$VideoPlayerHTML5Oz4?this.$VideoPlayerHTML5Oz4.getDebug().VideoAbrManager:null,BandwidthEstimator:b("oz-player/networks/OzBandwidthEstimator")}};d.setSmartBufferAdjustmentEnabled=function(a){};d.getVideoProjection=function(){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getMpd().getCustomField("fbProjection")};d.isPlayingLiveVODHighlights=function(){return!1};d.setEnableLiveheadCatchup=function(a){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.setEnableLiveheadCatchup(a)};d.isFBWasLive=function(){return!1};d.clearBufferAfterSeekingIfLowerQuality=function(a){};d.isFBIsLiveTemplated=function(){if(this.$VideoPlayerHTML5Oz4){var a=this.$VideoPlayerHTML5Oz4.getMpd().getCustomField("isFBIsLiveTemplated");return!!a}return!1};d.isFBMS=function(){return!1};d.isLiveheadCatchupEnabled=function(){return!1};d.getSeekableRanges=function(){__p&&__p();if(this.$VideoPlayerHTML5Oz4){var a=this.$VideoPlayerHTML5Oz4.getMpd();a=a.getVideoRepresentations();if(a.length){a=a[0];a=a.getTimeRanges();if(a.length){var c=a[0].startTime;a=Math.max(a[a.length-1].endTime-this.$VideoPlayerHTML5Oz3.getNumber("live_rewind_seek_to_live_delta",8),c);return new(b("TimeRanges"))([{startTime:c,endTime:a}])}}}return null};d.refreshDashManifest=function(){return b("Promise").reject()};d.refreshLiveVODHighlightsManifest=function(){return b("Promise").reject()};d.switchReplicaSet=function(a){var c=new(b("URI"))(this.$VideoPlayerHTML5Oz14);c.addQueryData("replica",a);this.$VideoPlayerHTML5Oz14=c.toString()};d.getPlaybackRate=function(){return 1};d.getPlayerVersion=function(){return b("VideoPlayerVersions").OZ};d.$VideoPlayerHTML5Oz69=function(a){a=a.trim();var b=a[a.length-1];return b.toLowerCase()==="p"?a:a+"p"};d.$VideoPlayerHTML5Oz70=function(a){a=a.trim();var b=a[a.length-1];return b.toLowerCase()==="p"?a.substr(0,a.length-1):a};d.getManifestUrl=function(){return this.$VideoPlayerHTML5Oz14};d.disableP2PPlayback=function(){};return c}(b("EventEmitter"));e.exports=a}),null);